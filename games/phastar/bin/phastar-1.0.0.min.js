Phaser.Plugin.PhastarPlugin=function(t){if("object"!=typeof EasyStar)throw new Error("Easystar is not defined!");this.parent=t,this.easyStar=new EasyStar.js,this.grid=null,this.walkables=[0]},Phaser.Plugin.PhastarPlugin.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.PhastarPlugin.prototype.constructor=Phaser.Plugin.PhastarPlugin,Phaser.Plugin.PhastarPlugin.prototype.setGrid=function(t,n,e){this.grid=[],this.walkables=n||this.walkables,e=e||null;for(var i=0;i<t.length;i++){this.grid[i]=[];for(var o=0;o<t[i].length;o++)this.grid[i][o]=t[i][o]?t[i][o].index:0}for(this.easyStar.setGrid(this.grid),this.easyStar.setAcceptableTiles(this.walkables),i=0;i<this.walkables.length;i++)this.easyStar.setTileCost(this.walkables[i],1);null!==e&&this.easyStar.setIterationsPerCalculation(e)},Phaser.Plugin.PhastarPlugin.prototype.findPath=function(t,n,e){this.easyStar.findPath(t[0],t[1],n[0],n[1],e),this.easyStar.calculate()};var EasyStar=function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){var i={},o=e(1),r=e(2),s=e(3);const a=0,u=1;t.exports=i,i.js=function(){var t,n,e,i=1,l=1.4,h=!1,c={},p={},f={},d=!0,y=[],g=Number.MAX_VALUE,v=!1;this.setAcceptableTiles=function(t){t instanceof Array?e=t:!isNaN(parseFloat(t))&&isFinite(t)&&(e=[t])},this.enableSync=function(){h=!0},this.disableSync=function(){h=!1},this.enableDiagonals=function(){v=!0},this.disableDiagonals=function(){v=!1},this.setGrid=function(n){t=n;for(var e=0;e<t.length;e++)for(var i=0;i<t[0].length;i++)p[t[e][i]]||(p[t[e][i]]=1)},this.setTileCost=function(t,n){p[t]=n},this.setAdditionalPointCost=function(t,n,e){f[t+"_"+n]=e},this.removeAdditionalPointCost=function(t,n){delete f[t+"_"+n]},this.removeAllAdditionalPointCosts=function(){f={}},this.setIterationsPerCalculation=function(t){g=t},this.avoidAdditionalPoint=function(t,n){c[t+"_"+n]=1},this.stopAvoidingAdditionalPoint=function(t,n){delete c[t+"_"+n]},this.enableCornerCutting=function(){d=!0},this.disableCornerCutting=function(){d=!1},this.stopAvoidingAllAdditionalPoints=function(){c={}},this.findPath=function(n,r,a,u,l){var c=function(t){h?l(t):setTimeout(function(){l(t)})};if(void 0===e)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(void 0===t)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(n<0||r<0||a<0||u<0||n>t[0].length-1||r>t.length-1||a>t[0].length-1||u>t.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(n===a&&r===u)return void c([]);for(var p=t[u][a],f=!1,d=0;d<e.length;d++)if(p===e[d]){f=!0;break}if(f===!1)return void c(null);var g=new o;g.openList=new s(function(t,n){return t.bestGuessDistance()-n.bestGuessDistance()}),g.isDoneCalculating=!1,g.nodeHash={},g.startX=n,g.startY=r,g.endX=a,g.endY=u,g.callback=c,g.openList.push(w(g,g.startX,g.startY,null,i)),y.push(g)},this.calculate=function(){if(0!==y.length&&void 0!==t&&void 0!==e)for(n=0;n<g;n++){if(0===y.length)return;if(h&&(n=0),0!==y[0].openList.size()){var o=y[0].openList.pop();if(y[0].endX===o.x&&y[0].endY===o.y){y[0].isDoneCalculating=!0;var r=[];r.push({x:o.x,y:o.y});for(var s=o.parent;null!=s;)r.push({x:s.x,y:s.y}),s=s.parent;r.reverse();var u=y[0],c=r;return void u.callback(c)}var p=[];o.list=a,o.y>0&&p.push({instance:y[0],searchNode:o,x:0,y:-1,cost:i*b(o.x,o.y-1)}),o.x<t[0].length-1&&p.push({instance:y[0],searchNode:o,x:1,y:0,cost:i*b(o.x+1,o.y)}),o.y<t.length-1&&p.push({instance:y[0],searchNode:o,x:0,y:1,cost:i*b(o.x,o.y+1)}),o.x>0&&p.push({instance:y[0],searchNode:o,x:-1,y:0,cost:i*b(o.x-1,o.y)}),v&&(o.x>0&&o.y>0&&(d||P(t,e,o.x,o.y-1)&&P(t,e,o.x-1,o.y))&&p.push({instance:y[0],searchNode:o,x:-1,y:-1,cost:l*b(o.x-1,o.y-1)}),o.x<t[0].length-1&&o.y<t.length-1&&(d||P(t,e,o.x,o.y+1)&&P(t,e,o.x+1,o.y))&&p.push({instance:y[0],searchNode:o,x:1,y:1,cost:l*b(o.x+1,o.y+1)}),o.x<t[0].length-1&&o.y>0&&(d||P(t,e,o.x,o.y-1)&&P(t,e,o.x+1,o.y))&&p.push({instance:y[0],searchNode:o,x:1,y:-1,cost:l*b(o.x+1,o.y-1)}),o.x>0&&o.y<t.length-1&&(d||P(t,e,o.x,o.y+1)&&P(t,e,o.x-1,o.y))&&p.push({instance:y[0],searchNode:o,x:-1,y:1,cost:l*b(o.x-1,o.y+1)}));for(var f=!1,w=0;w<p.length;w++)if(x(p[w].instance,p[w].searchNode,p[w].x,p[w].y,p[w].cost),p[w].instance.isDoneCalculating===!0){f=!0;break}f&&y.shift()}else{var u=y[0];u.callback(null),y.shift()}}};var x=function(n,i,o,r,s){var a=i.x+o,l=i.y+r;if(void 0===c[a+"_"+l]&&P(t,e,a,l)){var h=w(n,a,l,i,s);void 0===h.list?(h.list=u,n.openList.push(h)):i.costSoFar+s<h.costSoFar&&(h.costSoFar=i.costSoFar+s,h.parent=i,n.openList.updateItem(h))}},P=function(t,n,e,i){for(var o=0;o<n.length;o++)if(t[i][e]===n[o])return!0;return!1},b=function(n,e){return f[n+"_"+e]||p[t[e][n]]},w=function(t,n,e,i,o){if(void 0!==t.nodeHash[n+"_"+e])return t.nodeHash[n+"_"+e];var s=m(n,e,t.endX,t.endY);if(null!==i)var a=i.costSoFar+o;else a=0;var u=new r(i,n,e,a,s);return t.nodeHash[n+"_"+e]=u,u},m=function(t,n,e,i){if(v){var o=Math.abs(t-e),r=Math.abs(n-i);return o<r?l*o+r:l*r+o}var o=Math.abs(t-e),r=Math.abs(n-i);return o+r}}},function(t,n){t.exports=function(){this.isDoneCalculating=!0,this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList}},function(t,n){t.exports=function(t,n,e,i,o){this.parent=t,this.x=n,this.y=e,this.costSoFar=i,this.simpleDistanceToTarget=o,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}}},function(t,n,e){t.exports=e(4)},function(t,n,e){var i,o,r;(function(){var e,s,a,u,l,h,c,p,f,d,y,g,v,x,P;a=Math.floor,d=Math.min,s=function(t,n){return t<n?-1:t>n?1:0},f=function(t,n,e,i,o){var r;if(null==e&&(e=0),null==o&&(o=s),e<0)throw new Error("lo must be non-negative");for(null==i&&(i=t.length);e<i;)r=a((e+i)/2),o(n,t[r])<0?i=r:e=r+1;return[].splice.apply(t,[e,e-e].concat(n)),n},h=function(t,n,e){return null==e&&(e=s),t.push(n),x(t,0,t.length-1,e)},l=function(t,n){var e,i;return null==n&&(n=s),e=t.pop(),t.length?(i=t[0],t[0]=e,P(t,0,n)):i=e,i},p=function(t,n,e){var i;return null==e&&(e=s),i=t[0],t[0]=n,P(t,0,e),i},c=function(t,n,e){var i;return null==e&&(e=s),t.length&&e(t[0],n)<0&&(i=[t[0],n],n=i[0],t[0]=i[1],P(t,0,e)),n},u=function(t,n){var e,i,o,r,u,l;for(null==n&&(n=s),r=function(){l=[];for(var n=0,e=a(t.length/2);0<=e?n<e:n>e;0<=e?n++:n--)l.push(n);return l}.apply(this).reverse(),u=[],i=0,o=r.length;i<o;i++)e=r[i],u.push(P(t,e,n));return u},v=function(t,n,e){var i;if(null==e&&(e=s),i=t.indexOf(n),i!==-1)return x(t,0,i,e),P(t,i,e)},y=function(t,n,e){var i,o,r,a,l;if(null==e&&(e=s),o=t.slice(0,n),!o.length)return o;for(u(o,e),l=t.slice(n),r=0,a=l.length;r<a;r++)i=l[r],c(o,i,e);return o.sort(e).reverse()},g=function(t,n,e){var i,o,r,a,h,c,p,y,g,v;if(null==e&&(e=s),10*n<=t.length){if(a=t.slice(0,n).sort(e),!a.length)return a;for(r=a[a.length-1],y=t.slice(n),h=0,p=y.length;h<p;h++)i=y[h],e(i,r)<0&&(f(a,i,0,null,e),a.pop(),r=a[a.length-1]);return a}for(u(t,e),v=[],o=c=0,g=d(n,t.length);0<=g?c<g:c>g;o=0<=g?++c:--c)v.push(l(t,e));return v},x=function(t,n,e,i){var o,r,a;for(null==i&&(i=s),o=t[e];e>n&&(a=e-1>>1,r=t[a],i(o,r)<0);)t[e]=r,e=a;return t[e]=o},P=function(t,n,e){var i,o,r,a,u;for(null==e&&(e=s),o=t.length,u=n,r=t[n],i=2*n+1;i<o;)a=i+1,a<o&&!(e(t[i],t[a])<0)&&(i=a),t[n]=t[i],n=i,i=2*n+1;return t[n]=r,x(t,u,n,e)},e=function(){function t(t){this.cmp=null!=t?t:s,this.nodes=[]}return t.push=h,t.pop=l,t.replace=p,t.pushpop=c,t.heapify=u,t.updateItem=v,t.nlargest=y,t.nsmallest=g,t.prototype.push=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pop=function(){return l(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return p(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return c(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return u(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return v(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var n;return n=new t,n.nodes=this.nodes.slice(0),n},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(e,s){return o=[],i=s,r="function"==typeof i?i.apply(n,o):i,!(void 0!==r&&(t.exports=r))}(this,function(){return e})}).call(this)}]);